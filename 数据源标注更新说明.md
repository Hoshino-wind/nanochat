# 数据源标注更新说明

本次更新为 `数据处理指南.md` 和 `数据处理指南.ipynb` 两个文件添加了清晰的国内版和国外版数据源标注。

## 📋 更新概要

### 1. 文件开头添加数据源说明

在两个文件的开头都添加了 **🌍 数据源说明** 章节：

#### 🇨🇳 国内版（推荐）
- **预训练数据**：使用 ModelScope 平台的 `Datawhale/fineweb-edu-100b-shuffle`
- **优势**：国内访问速度快、稳定性高、无需特殊网络配置
- **配置**：项目已默认使用国内源，无需额外设置

#### 🌐 国际版
- **预训练数据**：使用 HuggingFace 原始数据集 `HuggingFaceFW/fineweb-edu`
- **适用**：海外用户或需要访问原始数据源
- **配置**：需要修改 `nanochat/dataset.py` 中的数据源配置

---

## 📝 详细更新内容

### 一、预训练数据部分

**更新前**：
- 仅说明使用 ModelScope 数据源
- 没有明确标注国内外版本区别

**更新后**：
```markdown
#### 🇨🇳 国内版（默认，推荐）

- 📖 数据集：`Datawhale/fineweb-edu-100b-shuffle`
- 🏢 平台：ModelScope（魔搭社区）
- 🔗 访问地址：https://modelscope.cn/datasets/Datawhale/fineweb-edu-100b-shuffle
- 🚀 优势：
  - ✅ 国内访问速度快
  - ✅ 下载稳定可靠
  - ✅ 无需特殊网络配置
  - ✅ 项目已默认配置

#### 🌐 国际版（备选）

- 📖 数据集：`HuggingFaceFW/fineweb-edu`
- 🏢 平台：HuggingFace
- 🔗 访问地址：https://huggingface.co/datasets/HuggingFaceFW/fineweb-edu
- 📝 说明：原始数据源，海外用户可直接访问
- 🔧 切换方法：修改 `nanochat/dataset.py` 中的数据源配置
```

### 二、中期训练数据部分

**更新前**：
- 仅简单列出数据集信息

**更新后**：
```markdown
#### 🌐 数据源信息

- 📖 数据集：`HuggingFaceTB/smoltalk`
- 🏢 平台：HuggingFace
- 🗣️ 内容：真实的人类对话记录
- 📥 下载方式：训练脚本自动下载

#### 🇨🇳 国内访问优化

如果下载速度慢，可以设置 HuggingFace 镜像加速：

```bash
export HF_ENDPOINT=https://hf-mirror.com
```
```

### 三、微调数据部分

**更新前**：
- 仅列出数据集名称

**更新后**：
```markdown
#### 🌐 数据集列表

- **ARC-Easy**：简单的选择题（2.3K 条）
- **ARC-Challenge**：困难的选择题（1.1K 条）
- **GSM8K**：数学推理题（8K 条）
- **SmolTalk**：对话数据（10K 条）

#### 🇨🇳 国内访问优化

所有微调数据集来自 HuggingFace，会在训练时自动下载。国内用户建议设置镜像：

```bash
export HF_ENDPOINT=https://hf-mirror.com
```

或在 Python 代码中设置：

```python
import os
os.environ['HF_ENDPOINT'] = 'https://hf-mirror.com'
```
```

### 四、文件末尾添加数据源优化总结

在两个文件末尾都添加了 **🎯 数据源优化总结** 章节：

```markdown
## 🎯 数据源优化总结

本项目已针对不同地区用户进行优化：

### 🇨🇳 国内用户

- ✅ **预训练数据**：使用 ModelScope 上的 `Datawhale/fineweb-edu-100b-shuffle`，国内访问速度快
- ✅ **自动配置**：项目已自动配置，无需手动设置
- ✅ **无缝使用**：运行 `python -m nanochat.dataset -n 8` 即可开始下载
- ✅ **其他数据集**：建议设置 HuggingFace 镜像 `export HF_ENDPOINT=https://hf-mirror.com`

### 🌐 国际用户

- ✅ **预训练数据**：可选择使用 HuggingFace 原始数据集 `HuggingFaceFW/fineweb-edu`
- ✅ **切换方法**：修改 `nanochat/dataset.py` 中的数据源配置
- ✅ **其他数据集**：直接从 HuggingFace 下载，无需额外配置
```

---

## 🎯 更新目标

1. ✅ **清晰区分**：明确标注国内版和国际版的区别
2. ✅ **易于理解**：使用直观的图标和标题
3. ✅ **完整信息**：提供数据源地址、平台、优势等详细信息
4. ✅ **操作指南**：提供具体的配置和切换方法
5. ✅ **一致性**：确保 Markdown 和 Notebook 两个文件内容一致

---

## 📊 更新统计

| 项目 | 数量 |
|------|------|
| 更新文件 | 2 个 |
| 新增章节 | 6 个 |
| 标注数据源 | 3 类（预训练、中期训练、微调） |
| 添加配置说明 | 4 处 |

---

## 💡 使用建议

### 对于国内用户：
1. 直接运行 `python -m nanochat.dataset -n 8` 下载预训练数据
2. 在训练前设置环境变量：`export HF_ENDPOINT=https://hf-mirror.com`
3. 无需修改任何代码配置

### 对于国际用户：
1. 如果想使用 HuggingFace 原始数据源，可修改 `nanochat/dataset.py`
2. 直接运行训练脚本，无需设置镜像

---

## ✅ 完成情况

- ✅ `数据处理指南.md` - 已完成标注
- ✅ `数据处理指南.ipynb` - 已完成标注
- ✅ 两个文件内容保持一致
- ✅ 所有数据源都已清晰标注国内版和国际版

---

**更新日期**：2025年10月31日

**更新内容**：为数据处理指南添加清晰的国内版和国外版数据源标注

